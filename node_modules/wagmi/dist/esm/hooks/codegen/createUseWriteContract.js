import {} from '@tanstack/react-query';
import {} from '@wagmi/core';
import {} from '@wagmi/core/query';
import { useCallback } from 'react';
import {} from 'viem';
import {} from 'viem/actions';
import { useAccount } from '../useAccount.js';
import { useChainId } from '../useChainId.js';
import { useWriteContract, } from '../useWriteContract.js';
export function createUseWriteContract(config) {
    if (config.address !== undefined && typeof config.address === 'object')
        return (parameters) => {
            const result = useWriteContract(parameters);
            const configChainId = useChainId();
            const account = useAccount();
            return {
                ...result,
                writeContract: useCallback((...args) => {
                    let chainId;
                    if (args[0].chainId)
                        chainId = args[0].chainId;
                    else if (args[0].account && args[0].account === account.address)
                        chainId = account.chainId;
                    else if (args[0].account === undefined)
                        chainId = account.chainId;
                    else
                        chainId = configChainId;
                    const variables = {
                        ...args[0],
                        address: chainId ? config.address?.[chainId] : undefined,
                        abi: config.abi,
                    };
                    result.writeContract(variables, args[1]);
                }, [
                    account.address,
                    account.chainId,
                    config,
                    configChainId,
                    result.writeContract,
                ]),
                writeContractAsync: useCallback((...args) => {
                    let chainId;
                    if (args[0].chainId)
                        chainId = args[0].chainId;
                    else if (args[0].account && args[0].account === account.address)
                        chainId = account.chainId;
                    else if (args[0].account === undefined)
                        chainId = account.chainId;
                    else
                        chainId = configChainId;
                    const variables = {
                        ...args[0],
                        address: chainId ? config.address?.[chainId] : undefined,
                        abi: config.abi,
                    };
                    return result.writeContractAsync(variables, args[1]);
                }, [
                    account.address,
                    account.chainId,
                    config,
                    configChainId,
                    result.writeContractAsync,
                ]),
            };
        };
    return (parameters) => {
        const result = useWriteContract(parameters);
        return {
            ...result,
            writeContract: useCallback((...args) => {
                const variables = {
                    ...args[0],
                    ...(config.address ? { address: config.address } : {}),
                    ...(config.functionName
                        ? { functionName: config.functionName }
                        : {}),
                    abi: config.abi,
                };
                result.writeContract(variables, args[1]);
            }, [config, result.writeContract]),
            writeContractAsync: useCallback((...args) => {
                const variables = {
                    ...args[0],
                    ...(config.address ? { address: config.address } : {}),
                    ...(config.functionName
                        ? { functionName: config.functionName }
                        : {}),
                    abi: config.abi,
                };
                return result.writeContractAsync(variables, args[1]);
            }, [config, result.writeContractAsync]),
        };
    };
}
//# sourceMappingURL=createUseWriteContract.js.map